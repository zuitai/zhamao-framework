(window.webpackJsonp=window.webpackJsonp||[]).push([[224],{905:function(_,v,a){"use strict";a.r(v);var t=a(81),i=Object(t.a)({},(function(){var _=this,v=_._self._c;return v("ContentSlotsDistributor",{attrs:{"slot-key":_.$parent.slotKey}},[v("h1",{attrs:{id:"更新日志-master-分支-commit"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#更新日志-master-分支-commit"}},[_._v("#")]),_._v(" 更新日志（master 分支 commit）")]),_._v(" "),v("p",[_._v("此文档将显示非发布版的提交版本相关更新文档，可能与发布版的更新日志有重合，在此仅作更新记录。")]),_._v(" "),v("p",[_._v("同时此处将只使用 build 版本号进行区分。")]),_._v(" "),v("h2",{attrs:{id:"build-478-2022-8-7"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#build-478-2022-8-7"}},[_._v("#")]),_._v(" build 478 (2022-8-7)")]),_._v(" "),v("ul",[v("li",[_._v("修复 "),v("code",[_._v("zm_sleep()")]),_._v(" 无法传入小数的 Bug (#141)")])]),_._v(" "),v("h2",{attrs:{id:"build-477-2022-8-5"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#build-477-2022-8-5"}},[_._v("#")]),_._v(" build 477 (2022-8-5)")]),_._v(" "),v("ul",[v("li",[_._v("修复了 "),v("code",[_._v("@CQNotice")]),_._v("、"),v("code",[_._v("@CQRequest")]),_._v(" 注解无法正常激活的 Bug (#140)")])]),_._v(" "),v("h2",{attrs:{id:"build-476-2022-8-3"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#build-476-2022-8-3"}},[_._v("#")]),_._v(" build 476 (2022-8-3)")]),_._v(" "),v("ul",[v("li",[v("code",[_._v("DataProvider::scanDirFiles()")]),_._v(" 新增参数 "),v("code",[_._v("$include_dir")]),_._v("，用于控制非递归模式下是否包含目录")])]),_._v(" "),v("h2",{attrs:{id:"build-475-2022-7-3"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#build-475-2022-7-3"}},[_._v("#")]),_._v(" build 475 (2022-7-3)")]),_._v(" "),v("ul",[v("li",[_._v("修复 "),v("code",[_._v("match_args")]),_._v(" 全局方法对于 "),v("code",[_._v("0")]),_._v(" 字符串处理的 Bug（#136）")])]),_._v(" "),v("h2",{attrs:{id:"build-474-2022-5-21"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#build-474-2022-5-21"}},[_._v("#")]),_._v(" build 474 (2022-5-21)")]),_._v(" "),v("ul",[v("li",[_._v("修复 WebSocket 连接时报错的 Bug")])]),_._v(" "),v("h2",{attrs:{id:"build-473-2022-5-7"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#build-473-2022-5-7"}},[_._v("#")]),_._v(" build 473 (2022-5-7)")]),_._v(" "),v("ul",[v("li",[_._v("修复 "),v("code",[_._v("server:stop")]),_._v(" 命令下部分情况报错的问题")])]),_._v(" "),v("h2",{attrs:{id:"build-472-2022-5-6"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#build-472-2022-5-6"}},[_._v("#")]),_._v(" build 472 (2022-5-6)")]),_._v(" "),v("ul",[v("li",[_._v("修复 Container 环境继承全局变量的问题")])]),_._v(" "),v("h2",{attrs:{id:"build-471-2022-5-5"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#build-471-2022-5-5"}},[_._v("#")]),_._v(" build 471 (2022-5-5)")]),_._v(" "),v("ul",[v("li",[_._v("修复 "),v("code",[_._v("CQ::encode()")]),_._v(" 无法传入 "),v("code",[_._v("int")]),_._v(" 的强类型解析问题（#113）")]),_._v(" "),v("li",[_._v("（内部）重构 CQ 类")]),_._v(" "),v("li",[_._v("新增启动命令参数 "),v("code",[_._v("--audit-mode")]),_._v("，用于单次审计模式")]),_._v(" "),v("li",[_._v("修复 "),v("code",[_._v("EventMapIterator")]),_._v(" 对 PHP 8.1 的兼容性问题")]),_._v(" "),v("li",[_._v("修复 #95 中提到的无输入流时报错的问题")]),_._v(" "),v("li",[_._v("新增部分不可执行脚本的防呆退出功能")]),_._v(" "),v("li",[_._v("修复 "),v("code",[_._v("ZMServer")]),_._v(" 中的 typo")])]),_._v(" "),v("h2",{attrs:{id:"build-470-2022-5-4"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#build-470-2022-5-4"}},[_._v("#")]),_._v(" build 470 (2022-5-4)")]),_._v(" "),v("ul",[v("li",[_._v("重构帮助生成器，将帮助生成器重构为 "),v("code",[_._v("CommandInfoUtil")]),_._v(" 类")])]),_._v(" "),v("h2",{attrs:{id:"build-469-2022-5-3"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#build-469-2022-5-3"}},[_._v("#")]),_._v(" build 469 (2022-5-3)")]),_._v(" "),v("ul",[v("li",[_._v("新增 "),v("code",[_._v("@CommandArgument")]),_._v(" 注解，可直接通过注解添加聊天机器人命令参数")]),_._v(" "),v("li",[_._v("修改默认 Hello 模块下随机数功能为采用 "),v("code",[_._v("@CommandArgument")]),_._v(" 注解模式")]),_._v(" "),v("li",[_._v("（内部）新增 "),v("code",[_._v("EventManager::$event_map")]),_._v("，用于补充对事件对象遍历的方式")]),_._v(" "),v("li",[_._v("新增 "),v("code",[_._v("EventMapIterator")]),_._v(" 类，用于遍历注解事件对象")]),_._v(" "),v("li",[_._v("新增 "),v("code",[_._v("MessageUtil::checkArguments()")]),_._v(" 方法，用于检查 "),v("code",[_._v("@CommandArgument")]),_._v(" 注解")])]),_._v(" "),v("h2",{attrs:{id:"build-468-2022-4-30"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#build-468-2022-4-30"}},[_._v("#")]),_._v(" build 468 (2022-4-30)")]),_._v(" "),v("ul",[v("li",[_._v("优化单元测试流程")]),_._v(" "),v("li",[_._v("优化上下文对象，在非协程环境下不再会抛出异常或返回 null")])]),_._v(" "),v("h2",{attrs:{id:"build-467-2022-4-29"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#build-467-2022-4-29"}},[_._v("#")]),_._v(" build 467 (2022-4-29)")]),_._v(" "),v("ul",[v("li",[_._v("优化 "),v("code",[_._v("@RequestMapping")]),_._v(" 注解事件的方法返回值处理，支持数组和字符串（数组自动转为 JSON 格式）")])]),_._v(" "),v("h2",{attrs:{id:"build-466-2022-4-29"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#build-466-2022-4-29"}},[_._v("#")]),_._v(" build 466 (2022-4-29)")]),_._v(" "),v("ul",[v("li",[_._v("优化容器支持无名顺序参数的调用")]),_._v(" "),v("li",[_._v("优化静态路由，支持 64 以上长度的路由")])]),_._v(" "),v("h2",{attrs:{id:"build-464-2022-4-28"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#build-464-2022-4-28"}},[_._v("#")]),_._v(" build 464 (2022-4-28)")]),_._v(" "),v("ul",[v("li",[_._v("重构全局方法 "),v("code",[_._v("match_pattern()")]),_._v("，优化性能以及解决部分字符串不能匹配的 Bug")])]),_._v(" "),v("h2",{attrs:{id:"build-463-2022-4-16"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#build-463-2022-4-16"}},[_._v("#")]),_._v(" build 463 (2022-4-16)")]),_._v(" "),v("ul",[v("li",[_._v("新增链式调用全局方法 "),v("code",[_._v("chain()")])]),_._v(" "),v("li",[_._v("新增函数执行时间工具全局函数 "),v("code",[_._v("stopwatch()")])])]),_._v(" "),v("h2",{attrs:{id:"build-462-2022-4-15"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#build-462-2022-4-15"}},[_._v("#")]),_._v(" build 462 (2022-4-15)")]),_._v(" "),v("ul",[v("li",[_._v("新增依赖注入、容器支持，目前对 Swoole 事件、机器人事件均支持使用依赖注入")]),_._v(" "),v("li",[_._v("新增全局容器方法 "),v("code",[_._v("container()")]),_._v("、"),v("code",[_._v("resolve()")]),_._v("、"),v("code",[_._v("app()")]),_._v("，用于获取容器参数等")]),_._v(" "),v("li",[_._v("新增相关容器测试")])]),_._v(" "),v("h2",{attrs:{id:"build-461-2022-4-11"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#build-461-2022-4-11"}},[_._v("#")]),_._v(" build 461 (2022-4-11)")]),_._v(" "),v("ul",[v("li",[_._v("新增 AllBotsProxy、AllGroupsProxy 代理类，支持批量发送机器人动作")]),_._v(" "),v("li",[_._v("新增全局函数 "),v("code",[_._v("implode_when_necessary()")]),_._v("，用于将可能为数组的参数转换为字符串")])]),_._v(" "),v("h2",{attrs:{id:"build-460-2022-4-3"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#build-460-2022-4-3"}},[_._v("#")]),_._v(" build 460 (2022-4-3)")]),_._v(" "),v("ul",[v("li",[_._v("优化代码到 phpstan-level-4")])]),_._v(" "),v("h2",{attrs:{id:"build-459-2022-4-3"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#build-459-2022-4-3"}},[_._v("#")]),_._v(" build 459 (2022-4-3)")]),_._v(" "),v("ul",[v("li",[_._v("优化代码到 phpstan-level-2")])]),_._v(" "),v("h2",{attrs:{id:"build-458-2022-4-3"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#build-458-2022-4-3"}},[_._v("#")]),_._v(" build 458 (2022-4-3)")]),_._v(" "),v("ul",[v("li",[_._v("优化代码到 phpstan-level-1")]),_._v(" "),v("li",[_._v("优化 "),v("code",[_._v("module:xxx")]),_._v(" 类命令的有关实现代码")])]),_._v(" "),v("h2",{attrs:{id:"build-457-2022-4-2"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#build-457-2022-4-2"}},[_._v("#")]),_._v(" build 457 (2022-4-2)")]),_._v(" "),v("ul",[v("li",[_._v("新增和优化测试用例（具体见文件）")]),_._v(" "),v("li",[_._v("部分文件以 PHPStan Level 2 进行规范化")])]),_._v(" "),v("h2",{attrs:{id:"build-456-2022-3-30"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#build-456-2022-3-30"}},[_._v("#")]),_._v(" build 456 (2022-3-30)")]),_._v(" "),v("ul",[v("li",[_._v("重构 phpunit-swoole，使其可以正常使用")]),_._v(" "),v("li",[_._v("新增 "),v("code",[_._v("--private-mode")]),_._v(" 参数，用于隐藏启动前的 MOTD 及敏感信息")]),_._v(" "),v("li",[_._v("修复 Composer extra 配置项 "),v("code",[_._v("zm.exclude-annotation-path")]),_._v(" 不能正常工作的 Bug")]),_._v(" "),v("li",[_._v("优化注解事件加载器，防止 Master 进程中添加的事件在 Worker 中被覆盖的问题")]),_._v(" "),v("li",[_._v("修复 "),v("code",[_._v("DataProvider::isRelativePath()")]),_._v(" 方法判断有误的 Bug")]),_._v(" "),v("li",[_._v("新增退出框架时支持以非 0 exit code 退出的功能")]),_._v(" "),v("li",[_._v("优化 "),v("code",[_._v("ZMUtil::getClassesPsr4()")]),_._v(" 方法，排除不含类的文件")]),_._v(" "),v("li",[_._v("优化 PHP CS Fixer 的配置")]),_._v(" "),v("li",[_._v("新增测试用例（具体见文件）")])]),_._v(" "),v("h2",{attrs:{id:"build-455-2022-3-27"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#build-455-2022-3-27"}},[_._v("#")]),_._v(" build 455 (2022-3-27)")]),_._v(" "),v("ul",[v("li",[_._v("修复前几个小版本无法收发消息的 Bug")]),_._v(" "),v("li",[_._v("新增 API Document 自动生成脚本")])]),_._v(" "),v("h2",{attrs:{id:"build-454-2022-3-27"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#build-454-2022-3-27"}},[_._v("#")]),_._v(" build 454 (2022-3-27)")]),_._v(" "),v("ul",[v("li",[_._v("修复部分命令下无法杀掉进程的 Bug")]),_._v(" "),v("li",[_._v("新增 "),v("code",[_._v("@Cron")]),_._v(" 注解")]),_._v(" "),v("li",[_._v("修复全局函数 "),v("code",[_._v("match_pattern")]),_._v(" 无法正常工作的 Bug")])]),_._v(" "),v("h2",{attrs:{id:"build-453-2022-3-25"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#build-453-2022-3-25"}},[_._v("#")]),_._v(" build 453 (2022-3-25)")]),_._v(" "),v("ul",[v("li",[_._v("新增 property 注解用于 IDE 识别")])]),_._v(" "),v("h2",{attrs:{id:"build-452-2022-3-25"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#build-452-2022-3-25"}},[_._v("#")]),_._v(" build 452 (2022-3-25)")]),_._v(" "),v("ul",[v("li",[_._v("修复 OnSetup 注解无法使用 Attribute 解析的 Bug")]),_._v(" "),v("li",[_._v("修复 HelpGenerator 的 Alias 不工作的 Bug")])]),_._v(" "),v("h2",{attrs:{id:"build-451-2022-3-21"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#build-451-2022-3-21"}},[_._v("#")]),_._v(" build 451 (2022-3-21)")]),_._v(" "),v("ul",[v("li",[_._v("重构全局函数，统一函数命名，并补全注释")])]),_._v(" "),v("h2",{attrs:{id:"build-450-2022-3-21"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#build-450-2022-3-21"}},[_._v("#")]),_._v(" build 450 (2022-3-21)")]),_._v(" "),v("ul",[v("li",[_._v("新增命令帮助生成器")])]),_._v(" "),v("h2",{attrs:{id:"build-449-2022-3-21"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#build-449-2022-3-21"}},[_._v("#")]),_._v(" build 449 (2022-3-21)")]),_._v(" "),v("ul",[v("li",[_._v("新增 Composer 模块加载和分发模式")])]),_._v(" "),v("h2",{attrs:{id:"build-448-2022-3-20"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#build-448-2022-3-20"}},[_._v("#")]),_._v(" build 448 (2022-3-20)")]),_._v(" "),v("ul",[v("li",[_._v("加快 build 命令的执行速度，取消进度条和提升性能")])]),_._v(" "),v("h2",{attrs:{id:"build-447-2022-3-20"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#build-447-2022-3-20"}},[_._v("#")]),_._v(" build 447 (2022-3-20)")]),_._v(" "),v("ul",[v("li",[_._v("发布 2.7.0 正式版")])]),_._v(" "),v("h2",{attrs:{id:"build-446-2022-3-20"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#build-446-2022-3-20"}},[_._v("#")]),_._v(" build 446 (2022-3-20)")]),_._v(" "),v("ul",[v("li",[_._v("新增 "),v("code",[_._v("./zhamao server")]),_._v(" 下的 "),v("code",[_._v("--no-state-check")]),_._v(" 参数，关闭“启动框架前的运行状态检查”功能")])]),_._v(" "),v("h2",{attrs:{id:"build-445-2022-3-20"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#build-445-2022-3-20"}},[_._v("#")]),_._v(" build 445 (2022-3-20)")]),_._v(" "),v("ul",[v("li",[_._v("新增配置项 "),v("code",[_._v("runtime")]),_._v("."),v("code",[_._v("annotation_reader_ignore")]),_._v("：支持注解解析器忽略注解的自定义")])]),_._v(" "),v("h2",{attrs:{id:"build-444-2022-3-20"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#build-444-2022-3-20"}},[_._v("#")]),_._v(" build 444 (2022-3-20)")]),_._v(" "),v("ul",[v("li",[_._v("更改 "),v("code",[_._v("extra")]),_._v("."),v("code",[_._v("exclude_annotate")]),_._v(" 为 "),v("code",[_._v("zm")]),_._v("."),v("code",[_._v("exclude-annotation-path")]),_._v(" 项")])]),_._v(" "),v("h2",{attrs:{id:"build-443-2022-3-20"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#build-443-2022-3-20"}},[_._v("#")]),_._v(" build 443 (2022-3-20)")]),_._v(" "),v("ul",[v("li",[_._v("修复注释空格的样式")])]),_._v(" "),v("h2",{attrs:{id:"build-442-2022-3-20"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#build-442-2022-3-20"}},[_._v("#")]),_._v(" build 442 (2022-3-20)")]),_._v(" "),v("ul",[v("li",[_._v("修复打包模块后 "),v("code",[_._v("files")]),_._v(" 的 autoload 项不能被解压和引入的 Bug")])]),_._v(" "),v("h2",{attrs:{id:"build-441-2022-3-20"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#build-441-2022-3-20"}},[_._v("#")]),_._v(" build 441 (2022-3-20)")]),_._v(" "),v("ul",[v("li",[_._v("修复打包模块时命名空间与实际不一致的 Bug")])]),_._v(" "),v("h2",{attrs:{id:"build-440-2022-3-20"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#build-440-2022-3-20"}},[_._v("#")]),_._v(" build 440 (2022-3-20)")]),_._v(" "),v("ul",[v("li",[_._v("新增方法宏（Macroable）")])]),_._v(" "),v("h2",{attrs:{id:"build-439-2022-3-19"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#build-439-2022-3-19"}},[_._v("#")]),_._v(" build 439 (2022-3-19)")]),_._v(" "),v("ul",[v("li",[_._v("新增 PHP 8 Attribute 与注解同时支持的特性")])]),_._v(" "),v("h2",{attrs:{id:"build-438-2022-3-18"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#build-438-2022-3-18"}},[_._v("#")]),_._v(" build 438 (2022-3-18)")]),_._v(" "),v("ul",[v("li",[_._v("修复 Response 类在 PHP 8.1 环境下的报错")])]),_._v(" "),v("h2",{attrs:{id:"build-437-2022-3-17"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#build-437-2022-3-17"}},[_._v("#")]),_._v(" build 437 (2022-3-17)")]),_._v(" "),v("ul",[v("li",[_._v("修复 "),v("code",[_._v("ctx()")]),_._v(" 可能会返回 null 的 Bug")])]),_._v(" "),v("h2",{attrs:{id:"build-436-2022-3-15"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#build-436-2022-3-15"}},[_._v("#")]),_._v(" build 436 (2022-3-15)")]),_._v(" "),v("ul",[v("li",[_._v("新增 PHPStan 和 PHP CS Fixer 并优化全局代码")])]),_._v(" "),v("h2",{attrs:{id:"build-435-2022-3-13"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#build-435-2022-3-13"}},[_._v("#")]),_._v(" build 435 (2022-3-13)")]),_._v(" "),v("ul",[v("li",[_._v("优化分离 WorkerManager 与 ProcessManager 的职责")]),_._v(" "),v("li",[_._v("新增 Ctrl+C 一次无法停止框架时多次 Ctrl+C 后可强行杀掉所有进程的功能")]),_._v(" "),v("li",[v("code",[_._v("./zhamao server:stop")]),_._v(" 新增参数 "),v("code",[_._v("--force")]),_._v("，使用 "),v("code",[_._v("SIGKILL")]),_._v(" 强行杀掉所有进程")]),_._v(" "),v("li",[_._v("新增 AnnotationParser 对 "),v("code",[_._v("autoload-dev")]),_._v(" 项中的 "),v("code",[_._v("psr-4")]),_._v(" 默认检索条件")]),_._v(" "),v("li",[_._v("新增框架启动状态检测功能，如果已经启动了同样目录的框架，则会报错")]),_._v(" "),v("li",[_._v("新增“强制启用轮询模式启动热更新”功能（参数 "),v("code",[_._v("--polling-watch")]),_._v("）")]),_._v(" "),v("li",[_._v("修复与 PHP 8.1 的兼容性")]),_._v(" "),v("li",[_._v("对 DaemonCommand 进行优化，与 ServerCommand 效果相同")]),_._v(" "),v("li",[_._v("修复 "),v("code",[_._v("autoload")]),_._v("."),v("code",[_._v("psr-4")]),_._v(" 不存在时报错的 Bug")]),_._v(" "),v("li",[_._v("新增框架停止时 Worker 退出回显状态码")]),_._v(" "),v("li",[_._v("新增 inotify 判断模式，如果使用 "),v("code",[_._v("--watch")]),_._v(" 检测到没有安装 inotify，则自动使用轮询模式")])]),_._v(" "),v("h2",{attrs:{id:"build-434-2022-1-8"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#build-434-2022-1-8"}},[_._v("#")]),_._v(" build 434 (2022-1-8)")]),_._v(" "),v("ul",[v("li",[_._v("修复框架在 PHP 8.1 下运行时的一些问题")]),_._v(" "),v("li",[_._v("新增 Console 日志输出到文件的功能")])]),_._v(" "),v("h2",{attrs:{id:"build-433-2021-12-28"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#build-433-2021-12-28"}},[_._v("#")]),_._v(" build 433 (2021-12-28)")]),_._v(" "),v("ul",[v("li",[_._v("修复 OneBotV11 因 IDE 自动优化导致 API 接口发生变化的问题")])]),_._v(" "),v("h2",{attrs:{id:"build-432-2021-12-25"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#build-432-2021-12-25"}},[_._v("#")]),_._v(" build 432 (2021-12-25)")]),_._v(" "),v("ul",[v("li",[_._v("新增 GoCqhttpAPI 包，用于支持额外的 OneBot Action（API）")]),_._v(" "),v("li",[_._v("修复 MySQL 查询器中 "),v("code",[_._v("fetchOne()")]),_._v(" 方法无法正确返回值的 Bug")]),_._v(" "),v("li",[_._v("修复 Swoole Hook 因配置不当无法正确使用的 Bug")])]),_._v(" "),v("h2",{attrs:{id:"build-431-2021-12-22"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#build-431-2021-12-22"}},[_._v("#")]),_._v(" build 431 (2021-12-22)")]),_._v(" "),v("ul",[v("li",[_._v("修复 Issue #50")]),_._v(" "),v("li",[_._v("新增 PhpStorm IDE 直接运行框架的脚本")])]),_._v(" "),v("h2",{attrs:{id:"build-430-2021-12-8"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#build-430-2021-12-8"}},[_._v("#")]),_._v(" build 430 (2021-12-8)")]),_._v(" "),v("ul",[v("li",[_._v("删除调试信息")]),_._v(" "),v("li",[_._v("修复 #56 中关于数据库组件的 Bug")])]),_._v(" "),v("h2",{attrs:{id:"build-429-2021-12-7"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#build-429-2021-12-7"}},[_._v("#")]),_._v(" build 429 (2021-12-7)")]),_._v(" "),v("ul",[v("li",[_._v("新增配置项 "),v("code",[_._v("onebot")]),_._v("."),v("code",[_._v("message_command_policy")])]),_._v(" "),v("li",[_._v("新增 CQCommand 阻断策略的自定义配置功能")]),_._v(" "),v("li",[_._v("修复 CQAfter 无法正常使用的 bug #53")])]),_._v(" "),v("h2",{attrs:{id:"build-428-2021-11-16"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#build-428-2021-11-16"}},[_._v("#")]),_._v(" build 428 (2021-11-16)")]),_._v(" "),v("ul",[v("li",[_._v("修复 "),v("code",[_._v("ctx()->waitMessage()")]),_._v(" 在 array 消息模式下无法正确返回消息字符串的问题")]),_._v(" "),v("li",[_._v("新增 "),v("code",[_._v("ctx()->getArrayMessage()")]),_._v(" 和 "),v("code",[_._v("ctx()->getStringMessage()")]),_._v(" 两个方法")]),_._v(" "),v("li",[_._v("修复注解事件 "),v("code",[_._v("CQCommand")]),_._v(" 和 "),v("code",[_._v("CQMessage")]),_._v(" 在 array 消息模式下无法正确解析的 Bug")])]),_._v(" "),v("h2",{attrs:{id:"build-427-2021-11-16"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#build-427-2021-11-16"}},[_._v("#")]),_._v(" build 427 (2021-11-16)")]),_._v(" "),v("ul",[v("li",[_._v("新增全局中间件，可在全局配置文件中设置")]),_._v(" "),v("li",[_._v("修复部分 Typo")]),_._v(" "),v("li",[_._v("新增指令 "),v("code",[_._v("server:status")]),_._v("、"),v("code",[_._v("server:reload")]),_._v("、"),v("code",[_._v("server:stop")]),_._v(" 可用在新开终端中查看框架运行状态、重启和退出")]),_._v(" "),v("li",[_._v("新增支持 "),v("code",[_._v("array")]),_._v(" 格式的消息")]),_._v(" "),v("li",[_._v("上下文 Context 对象新增 "),v("code",[_._v("getOriginMessage()")]),_._v(" 用于获取原消息，"),v("code",[_._v("getMessage()")]),_._v(" 如果在设置了转换后，将默认转换消息为字符串格式保持与旧模块兼容")]),_._v(" "),v("li",[_._v("OneBot API 新增全局过滤器，可用作 Action 过滤重写等操作")]),_._v(" "),v("li",[_._v("配置文件新增 "),v("code",[_._v("runtime.reload_delay_time")]),_._v("，用于可配置重载 Worker 等待的时间（毫秒）")]),_._v(" "),v("li",[_._v("配置文件新增 "),v("code",[_._v("runtime.global_middleware_binding")]),_._v("，用于配置全局中间件")]),_._v(" "),v("li",[_._v("配置文件新增 "),v("code",[_._v("onebot.message_convert_string")]),_._v("，用于配置是否转换数组格式为字符串，保证与前版本的兼容性（默认为 true）")]),_._v(" "),v("li",[_._v("MessageUtil 消息工具类新增方法："),v("code",[_._v("strToArray($msg, bool $ignore_space = true, bool $trim_text = false)")])]),_._v(" "),v("li",[_._v("MessageUtil 消息工具类新增方法："),v("code",[_._v("arrayToStr(array $array)")])]),_._v(" "),v("li",[_._v("新增框架启动多次监测功能，无法使用同一个框架项目同时启动两个框架")])]),_._v(" "),v("h2",{attrs:{id:"build-426-2021-11-10"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#build-426-2021-11-10"}},[_._v("#")]),_._v(" build 426 (2021-11-10)")]),_._v(" "),v("ul",[v("li",[_._v("修复 CQ 码的解析函数 Bug（#52）")])]),_._v(" "),v("h2",{attrs:{id:"build-425-2021-11-3"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#build-425-2021-11-3"}},[_._v("#")]),_._v(" build 425 (2021-11-3)")]),_._v(" "),v("ul",[v("li",[_._v("删除未实际应用功能的配置参数")]),_._v(" "),v("li",[_._v("修复 reload 时会断开 WebSocket 连接且导致进程崩溃的 Bug")])]),_._v(" "),v("h2",{attrs:{id:"build-424-2021-11-2"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#build-424-2021-11-2"}},[_._v("#")]),_._v(" build 424 (2021-11-2)")]),_._v(" "),v("ul",[v("li",[_._v("新增 InstantModule 类、ZMServer 类、ModuleBase 类")]),_._v(" "),v("li",[_._v("配置文件新增 "),v("code",[_._v("runtime.reload_kill_connect")]),_._v("、"),v("code",[_._v("runtime.global_middleware_binding")]),_._v(" 选项")]),_._v(" "),v("li",[_._v("修复部分情况下闭包事件分发时崩溃的 bug")]),_._v(" "),v("li",[_._v("新增内部方法 "),v("code",[_._v("_zm_env_check")])]),_._v(" "),v("li",[_._v("调整默认的 OneBot 模块对应的等级从 99999 调整为 99")]),_._v(" "),v("li",[_._v("新增导出框架运行参数的列表功能")])]),_._v(" "),v("h2",{attrs:{id:"build-423-2021-10-17"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#build-423-2021-10-17"}},[_._v("#")]),_._v(" build 423 (2021-10-17)")]),_._v(" "),v("ul",[v("li",[_._v("修复 PHP 7.2 ~ 7.3 下无法使用新版 MySQL 组件的 bug")])]),_._v(" "),v("h2",{attrs:{id:"build-422-2021-10-6"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#build-422-2021-10-6"}},[_._v("#")]),_._v(" build 422 (2021-10-6)")]),_._v(" "),v("ul",[v("li",[_._v("修复 "),v("code",[_._v("script_")]),_._v(" 前缀无法被排除加载模块的 bug")]),_._v(" "),v("li",[_._v("修复 MySQL 组件的依赖问题")])]),_._v(" "),v("h2",{attrs:{id:"build-421-2021-9-11"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#build-421-2021-9-11"}},[_._v("#")]),_._v(" build 421 (2021-9-11)")]),_._v(" "),v("ul",[v("li",[_._v("删除多余的调试信息")])]),_._v(" "),v("h2",{attrs:{id:"build-420-2021-9-11"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#build-420-2021-9-11"}},[_._v("#")]),_._v(" build 420 (2021-9-11)")]),_._v(" "),v("ul",[v("li",[_._v("修复 OneBot 事件无法响应的 bug")]),_._v(" "),v("li",[_._v("新增部分 EventDispatcher 触发的事件 debug 日志")])]),_._v(" "),v("h2",{attrs:{id:"build-419-2021-9-11"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#build-419-2021-9-11"}},[_._v("#")]),_._v(" build 419 (2021-9-11)")]),_._v(" "),v("ul",[v("li",[_._v("修复 DB 模块在未连接数据库的时候抛出未知异常")]),_._v(" "),v("li",[_._v("修复部分情况下打包模块出现的错误")])]),_._v(" "),v("h2",{attrs:{id:"build-418-2021-9-10"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#build-418-2021-9-10"}},[_._v("#")]),_._v(" build 418 (2021-9-10)")]),_._v(" "),v("ul",[v("li",[_._v("修复 ZMAtomic 在 test 环境下的 bug")]),_._v(" "),v("li",[_._v("修复 MessageUtil 的报错")])]),_._v(" "),v("h2",{attrs:{id:"build-417-2021-8-29"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#build-417-2021-8-29"}},[_._v("#")]),_._v(" build 417 (2021-8-29)")]),_._v(" "),v("ul",[v("li",[_._v("新增 AnnotationException，统一框架内部的抛出异常的类型")]),_._v(" "),v("li",[_._v("新增 AnnotationParser 下的 "),v("code",[_._v("verifyMiddlewares()")]),_._v(" 方法")]),_._v(" "),v("li",[_._v("私有化 CQAPI 类下的内部方法")]),_._v(" "),v("li",[_._v("将 WebSocket API 响应超时时间从 60 秒缩短为 30 秒")]),_._v(" "),v("li",[_._v("修复 DB 类不能使用旧查询器的 bug")]),_._v(" "),v("li",[_._v("统一 DB 类下抛出 Exception 的类型为 ZMException 的子类")]),_._v(" "),v("li",[_._v("EventDispatcher 新增对 "),v("code",[_._v("middleware_error_policy")]),_._v(" 的处理段")]),_._v(" "),v("li",[_._v("配置文件下 "),v("code",[_._v("runtime")]),_._v(" 新增 "),v("code",[_._v("middleware_error_policy")]),_._v(" 字段")]),_._v(" "),v("li",[_._v("将 LightCache 组件抛出的异常改为 LightCacheException")]),_._v(" "),v("li",[_._v("ModuleManager 修复改配置的 "),v("code",[_._v("load_path")]),_._v(" 不生效的 bug")]),_._v(" "),v("li",[_._v("修复打包时生成的 Phar Autoload 列表出错的 bug")]),_._v(" "),v("li",[_._v("将配置的 override 改为 overwrite")]),_._v(" "),v("li",[_._v("新增解包时忽略依赖的选项（"),v("code",[_._v("--ignore-depends")]),_._v("）")]),_._v(" "),v("li",[_._v("删除众多调试日志，修改部分调试日志为 debug 级别的输出")]),_._v(" "),v("li",[_._v("修改 "),v("code",[_._v("ZM\\MySQL\\MySQLManager")]),_._v(" 下的 "),v("code",[_._v("getConnection()")]),_._v(" 为 "),v("code",[_._v("getWrapper()")])]),_._v(" "),v("li",[_._v("MySQLPool 对象新增 "),v("code",[_._v("getCount()")]),_._v(" 方法")]),_._v(" "),v("li",[_._v("新增 MySQLQueryBuilder 类（"),v("code",[_._v("doctrine/dbal")]),_._v(" 的 wrapper 类）")]),_._v(" "),v("li",[_._v("修复 MySQLStatement 封装原 dbal 组件时与连接池不兼容的 bug")]),_._v(" "),v("li",[_._v("新增 MySQLStatementWrapper 类")]),_._v(" "),v("li",[_._v("完善 MySQLWrapper 类，用作主要的查询对象控制类")]),_._v(" "),v("li",[_._v("编写外部插件加载方式（Phar 热加载功能）")]),_._v(" "),v("li",[_._v("修复 "),v("code",[_._v("ZMUtil::getClassesPsr4()")]),_._v(" 方法在遇到空扩展名文件时的报错")])])])}),[],!1,null,null,null);v.default=i.exports}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[175],{856:function(s,t,a){"use strict";a.r(t);var n=a(81),e=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"消息处理工具类-messageutil"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#消息处理工具类-messageutil"}},[s._v("#")]),s._v(" 消息处理工具类 - MessageUtil")]),s._v(" "),t("p",[s._v("类定义："),t("code",[s._v("\\ZM\\Utils\\MessageUtil")])]),s._v(" "),t("blockquote",[t("p",[s._v("2.3.0 版本起可用。")])]),s._v(" "),t("p",[s._v("这里放置一些机器人聊天消息处理的便捷静态方法，例如下载图片等。")]),s._v(" "),t("h2",{attrs:{id:"方法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#方法"}},[s._v("#")]),s._v(" 方法")]),s._v(" "),t("h3",{attrs:{id:"downloadcqimage"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#downloadcqimage"}},[s._v("#")]),s._v(" downloadCQImage()")]),s._v(" "),t("p",[s._v("下载用户消息中所带的所有图片，并返回文件路径。")]),s._v(" "),t("p",[s._v("定义："),t("code",[s._v("downloadCQImage($msg, $path = null)")])]),s._v(" "),t("p",[s._v("参数 "),t("code",[s._v("$msg")]),s._v(" 为带图片的用户消息，例如 "),t("code",[s._v("你好啊！\\n[CQ:image,file=a.jpg,url=https://zhamao.xin/file/hello.jpg]")])]),s._v(" "),t("p",[s._v("参数 "),t("code",[s._v("$path")]),s._v(" 为图片下载的路径，如果不填（默认 null）则指定为 "),t("code",[s._v("zm_data/images/")]),s._v(" 目录，且不存在会自动创建。")]),s._v(" "),t("div",{staticClass:"language-php line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-php"}},[t("code",[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$r")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name static-context"}},[s._v("MessageUtil")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("::")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("downloadCQImage")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[s._v('"你好啊！\\n[CQ:image,file=a.jpg,url=https://zhamao.xin/file/hello.jpg]"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('/*\n$r == [\n    "/path-to/zhamao-framework/zm_data/images/a.jpg"\n];\n*/')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("p",[s._v("如果返回的是空数组 "),t("code",[s._v("[ ]")]),s._v("，则表明消息中没有图片。如果返回的是 "),t("code",[s._v("false")]),s._v("，则表明其中至少一张下载失败或路径有误。")]),s._v(" "),t("h3",{attrs:{id:"containsimage"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#containsimage"}},[s._v("#")]),s._v(" containsImage()")]),s._v(" "),t("p",[s._v("检查消息中是否含有图片。")]),s._v(" "),t("p",[s._v("定义："),t("code",[s._v("containsImage($msg)")])]),s._v(" "),t("p",[s._v("返回："),t("code",[s._v("bool")]),s._v("，你懂的，true 就是有，false 就没有。")]),s._v(" "),t("div",{staticClass:"language-php line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-php"}},[t("code",[t("span",{pre:!0,attrs:{class:"token class-name static-context"}},[s._v("MessageUtil")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("::")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("containsImage")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[s._v('"[CQ:image,file=a.jpg,url=http://xxx]"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// true")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token class-name static-context"}},[s._v("MessageUtil")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("::")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("containsImage")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[s._v('"[CQ:face,id=140] 咦，这是一条带表情的消息"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// false")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h3",{attrs:{id:"isatme"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#isatme"}},[s._v("#")]),s._v(" isAtMe()")]),s._v(" "),t("p",[s._v("检查消息中是否含有@bot的消息。")]),s._v(" "),t("p",[s._v("定义："),t("code",[s._v("isAtMe($msg, $me_id)")])]),s._v(" "),t("p",[s._v("参数 "),t("code",[s._v("$me_id")]),s._v(" 为Bot的QQ号。")]),s._v(" "),t("p",[s._v("返回："),t("code",[s._v("bool")]),s._v("，true 就是有，false 就没有。")]),s._v(" "),t("div",{staticClass:"language-php line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-php"}},[t("code",[t("span",{pre:!0,attrs:{class:"token class-name static-context"}},[s._v("MessageUtil")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("::")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("isAtMe")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[s._v('"[CQ:at,qq=123456]炸毛你好"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[s._v('"123456"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// true")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token class-name static-context"}},[s._v("MessageUtil")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("::")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("isAtMe")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[s._v('"[CQ:at,qq=123456789]另一个朋友你好"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[s._v('"123456"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// false")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h3",{attrs:{id:"getimagecqfromlocal"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#getimagecqfromlocal"}},[s._v("#")]),s._v(" getImageCQFromLocal()")]),s._v(" "),t("p",[s._v("通过文件路径获取图片的发送 CQ 码。")]),s._v(" "),t("p",[s._v("定义："),t("code",[s._v("getImageCQFromLocal($file, $type = 0)")])]),s._v(" "),t("p",[s._v("参数 "),t("code",[s._v("$file")]),s._v(" 为图片的绝对路径。")]),s._v(" "),t("p",[s._v("返回：图片的 CQ 码，如 "),t("code",[s._v("[CQ:image,file=xxxxx]")])]),s._v(" "),t("p",[s._v("参数 "),t("code",[s._v("$type")]),s._v("：")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("0")]),s._v("：以 base64 的方式发送图片，返回结果如 "),t("code",[s._v("[CQ:image,file=base64://xxxxxx]")])]),s._v(" "),t("li",[t("code",[s._v("1")]),s._v("：以 "),t("code",[s._v("file://")]),s._v(" 本地文件的方式发送图片，返回结果如 "),t("code",[s._v("[CQ:image,file=file:///path-to/images/a.jpg]")])]),s._v(" "),t("li",[t("code",[s._v("2")]),s._v("：返回图片的 http:// CQ 码（默认为 /images/ 路径就是文件对应所在的目录），如 "),t("code",[s._v("[CQ:image,file=http://127.0.0.1:20001/images/a.jpg]")])])]),s._v(" "),t("h3",{attrs:{id:"splitcommand"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#splitcommand"}},[s._v("#")]),s._v(" splitCommand()")]),s._v(" "),t("p",[s._v("切割用户消息为数组形式（"),t("code",[s._v("@CQCommand")]),s._v(" 就是使用此方式切割的）")]),s._v(" "),t("p",[s._v("定义："),t("code",[s._v("splitCommand($msg): array")])]),s._v(" "),t("p",[s._v("返回：数组，切分后的。")]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("为什么不直接使用 explode 呢")]),s._v(" "),t("p",[s._v("因为 "),t("code",[s._v("explode()")]),s._v(" 只会简单粗暴的切割字符串，假设用户输入的消息中两个词中间有多个空格，则会有空的词出现。例如 "),t("code",[s._v("你好 我是一个长空格")]),s._v("。此函数会将多个空格当作一个空格来对待。")])]),s._v(" "),t("div",{staticClass:"language-php line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-php"}},[t("code",[t("span",{pre:!0,attrs:{class:"token class-name static-context"}},[s._v("MessageUtil")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("::")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("splitCommand")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[s._v('"你好 我是傻瓜\\n我是傻瓜二号"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('// ["你好","我是傻瓜","我是傻瓜二号"]')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token class-name static-context"}},[s._v("MessageUtil")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("::")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("splitCommand")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[s._v('"我有   三个空格"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('// ["我有","三个空格"]')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h3",{attrs:{id:"matchcommand"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#matchcommand"}},[s._v("#")]),s._v(" matchCommand()")]),s._v(" "),t("p",[s._v("匹配一条消息到 "),t("code",[s._v("@CQCommand")]),s._v(" 规则的注解事件，返回要执行的类和函数位置。")]),s._v(" "),t("p",[s._v("定义："),t("code",[s._v("matchCommand($msg, $obj)")])]),s._v(" "),t("p",[s._v("参数 "),t("code",[s._v("$msg")]),s._v(" 为消息内容。")]),s._v(" "),t("p",[s._v("参数 "),t("code",[s._v("$obj")]),s._v(" 为事件的对象，可使用 "),t("code",[s._v("ctx()->getData()")]),s._v(" 获取原先的事件体（仅限 OneBot 消息类型事件中使用）")]),s._v(" "),t("p",[s._v("返回："),t("code",[s._v("\\ZM\\Entity\\MatchObject")]),s._v(" 对象，含有匹配成功与否，匹配到的注解对象，匹配到的分割词等，见 []")]),s._v(" "),t("h3",{attrs:{id:"addshortcommand"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#addshortcommand"}},[s._v("#")]),s._v(" addShortCommand()")]),s._v(" "),t("p",[s._v("快速添加一条静态消息回复命令。")]),s._v(" "),t("p",[s._v("定义："),t("code",[s._v("addShortCommand($command, string $reply)")])]),s._v(" "),t("p",[s._v("参数 "),t("code",[s._v("$command")]),s._v(" 为问的内容，如 "),t("code",[s._v("炸毛不聪明")]),s._v("。")]),s._v(" "),t("p",[s._v("参数 "),t("code",[s._v("$reply")]),s._v(" 为回复的内容，如 "),t("code",[s._v("其实还是很聪明的！")]),s._v("。")]),s._v(" "),t("p",[s._v("这个命令推荐在 "),t("code",[s._v("@OnStart")]),s._v(" 注解下使用，可以用这个来做一个动态的词库，从文件加载后使用。")]),s._v(" "),t("div",{staticClass:"language-php line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-php"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/**\n * @OnStart()\n */")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function-definition function"}},[s._v("onStart")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token class-name static-context"}},[s._v("MessageUtil")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("::")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("addShortCommand")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[s._v('"炸毛不聪明"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[s._v('"其实还是很聪明的！"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("chat-box",{attrs:{"my-chats":[{type:0,content:"炸毛不聪明"},{type:1,content:"其实还是很聪明的！"}]}}),s._v(" "),t("h3",{attrs:{id:"strtoarray"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#strtoarray"}},[s._v("#")]),s._v(" strToArray()")]),s._v(" "),t("p",[s._v("将 "),t("code",[s._v("string")]),s._v(" 类型的消息文本转换为 "),t("code",[s._v("array")]),s._v(" 格式。")]),s._v(" "),t("p",[s._v("定义："),t("code",[s._v("strToArray($msg, bool $ignore_space = true, bool $trim_text = false)")])]),s._v(" "),t("p",[s._v("参数 "),t("code",[s._v("$msg")]),s._v(" 为带 OB/CQ 码的字符串消息，如 "),t("code",[s._v("你好啊，[CQ:at,qq=123]")]),s._v("。")]),s._v(" "),t("p",[s._v("参数 "),t("code",[s._v("$ignore_space")]),s._v(" 在 "),t("code",[s._v("false")]),s._v(" 时，转换的数组内会包含空 "),t("code",[s._v("text")]),s._v(" 段。")]),s._v(" "),t("p",[s._v("参数 "),t("code",[s._v("$trim_text")]),s._v(" 为 "),t("code",[s._v("true")]),s._v(" 时，会自动去除 "),t("code",[s._v("text")]),s._v(" 段消息头尾的换行符和空格。")]),s._v(" "),t("p",[s._v("这个命令转换的数组格式符合 OneBot 11/12 标准，但细节上可能会与不同 OneBot 实现有所差异。")]),s._v(" "),t("div",{staticClass:"language-php line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-php"}},[t("code",[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$str")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[s._v('"你好啊，[CQ:at,qq=123]"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$arr")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name class-name-fully-qualified static-context"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("ZM"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("Utils"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("MessageUtil")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("::")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("strToArray")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$str")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("转换结果参考如下：")]),s._v(" "),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"type"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"text"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"data"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"text"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"你好啊，"')]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"type"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"at"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"data"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"qq"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"123"')]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br")])]),t("h3",{attrs:{id:"arraytostr"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#arraytostr"}},[s._v("#")]),s._v(" arrayToStr()")]),s._v(" "),t("p",[s._v("将 "),t("code",[s._v("array")]),s._v(" 格式的消息内容转换为字符串 + CQ 码的形式。")]),s._v(" "),t("p",[s._v("定义："),t("code",[s._v("arrayToStr(array $array)")])]),s._v(" "),t("div",{staticClass:"language-php line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-php"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 我们使用上边的 $arr 作为传入值。")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$new_str")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name class-name-fully-qualified static-context"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("ZM"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("Utils"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("MessageUtil")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("::")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("arrayToStr")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$arr")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('// 结果："你好啊，[CQ:at,qq=123]"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])])],1)}),[],!1,null,null,null);t.default=e.exports}}]);
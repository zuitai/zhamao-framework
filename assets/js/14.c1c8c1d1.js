(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{698:function(t,s,a){"use strict";a.r(s);var e=a(81),n=Object(e.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"内部类文件手册"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#内部类文件手册"}},[t._v("#")]),t._v(" 内部类文件手册")]),t._v(" "),s("p",[t._v("这个章节写明了在框架使用过程中可能涉及到的框架内部或 Swoole、其他 composer 依赖组件的内部类，这里会根据类的命名空间一一说明。")]),t._v(" "),s("h2",{attrs:{id:"swoole-http-request"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#swoole-http-request"}},[t._v("#")]),t._v(" Swoole\\Http\\Request")]),t._v(" "),s("p",[t._v("此类是 Swoole 内部的一个类，一般在收到 HTTP 请求时，在 "),s("code",[t._v("@RequestMapping")]),t._v(" 或 "),s("code",[t._v("@OnRequestEvent()")]),t._v(" 两个注解下可用，用作获取 GET、POST参数，上传到后端的文件、Cookies 等。详见 "),s("a",{attrs:{href:"http://wiki.swoole.com/#/http_server?id=httprequest",target:"_blank",rel:"noopener noreferrer"}},[t._v("Swoole 文档 - Request"),s("OutboundLink")],1),t._v(" 。")]),t._v(" "),s("h3",{attrs:{id:"属性"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#属性"}},[t._v("#")]),t._v(" 属性")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("$fd")]),t._v("：获取当前连接的文件描述符 ID。")]),t._v(" "),s("li",[s("code",[t._v("$header")]),t._v("："),s("code",[t._v("HTTP")]),t._v(" 请求的头部信息。类型为数组，所有 "),s("code",[t._v("key")]),t._v(" 均为小写。")]),t._v(" "),s("li",[s("code",[t._v("$server")]),t._v("："),s("code",[t._v("HTTP")]),t._v(" 请求相关的服务器信息。")]),t._v(" "),s("li",[s("code",[t._v("$cookie")]),t._v("：获取 Cookies。")]),t._v(" "),s("li",[s("code",[t._v("$get")]),t._v("：获取 GET 参数。")]),t._v(" "),s("li",[s("code",[t._v("$post")]),t._v("：获取 POST 参数。")]),t._v(" "),s("li",[s("code",[t._v("$files")]),t._v("：获取上传的文件信息")])]),t._v(" "),s("h3",{attrs:{id:"方法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#方法"}},[t._v("#")]),t._v(" 方法")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("rawContent()")]),t._v("：获取 POST 包原始二进制内容，相当于原生 PHP 的 "),s("code",[t._v('file_get_contents("php://input");')]),t._v(" 。")]),t._v(" "),s("li",[s("code",[t._v("getData()")]),t._v("：获取完整的原始 "),s("code",[t._v("Http")]),t._v(" 请求报文。包括 "),s("code",[t._v("Http Header")]),t._v(" 和 "),s("code",[t._v("Http Body")])])]),t._v(" "),s("h3",{attrs:{id:"示例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#示例"}},[t._v("#")]),t._v(" 示例")]),t._v(" "),s("div",{staticClass:"language-php line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("TODO")]),t._v("：先放一放。\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("h2",{attrs:{id:"zm-entity-matchobject"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#zm-entity-matchobject"}},[t._v("#")]),t._v(" ZM\\Entity\\MatchObject")]),t._v(" "),s("p",[t._v("此类是调用方法 "),s("code",[t._v("MessageUtil::matchCommand()")]),t._v(" 返回的对象体，含有匹配成功与否和匹配到的注解相关的信息。")]),t._v(" "),s("h3",{attrs:{id:"属性-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#属性-2"}},[t._v("#")]),t._v(" 属性")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("$match")]),t._v("："),s("code",[t._v("bool")]),t._v(" 类型，返回匹配是否成功")]),t._v(" "),s("li",[s("code",[t._v("$object")]),t._v("："),s("code",[t._v("CQCommand")]),t._v(" 注解类，如果匹配成功则返回对应的 "),s("code",[t._v("@CQCommand")]),t._v(" 信息")]),t._v(" "),s("li",[s("code",[t._v("match")]),t._v("："),s("code",[t._v("array")]),t._v(" 类型，如果匹配成功则返回匹配到的参数")])]),t._v(" "),s("div",{staticClass:"language-php line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// 假设我有一个注解事件 @CQCommand(match="你好")，绑定的函数是 \\Module\\Example\\Hello 下的 hello123()')]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$obj")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name static-context"}},[t._v("MessageUtil")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("matchCommand")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[t._v('"你好 我叫顺溜 我今年二十八"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ctx")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getData")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('/* 以下是返回信息，仅供参考\n$obj->match ==> true\n$obj->object ==> \\ZM\\Annotation\\CQ\\CQCommand: (\n\tmatch: "你好",\n    pattern: "",\n    regex: "",\n    start_with: "",\n    end_with: "",\n    keyword: "",\n    alias: [],\n    message_type: "",\n    user_id: 0,\n    group_id: 0,\n    discuss_id: 0,\n    level: 20,\n    method: "hello123",\n    class: \\Module\\Example\\Hello::class\n)\n$obj->match ==> [\n\t"我叫顺溜",\n\t"我今年二十八"\n]\n*/')]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br")])])])}),[],!1,null,null,null);s.default=n.exports}}]);